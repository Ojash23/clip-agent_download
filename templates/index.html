<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Viral Clip Extractor</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>üî• Viral Clip Extractor</h1>
            <p>Extract the most engaging clips from your videos using AI</p>
            <div id="statusIndicator" class="status-indicator">
                <div class="status-dot"></div>
                <span class="status-text">Ready</span>
            </div>
        </header>

        <main class="main-content">
            <!-- Input Section -->
            <section class="input-section">
                <div class="tab-buttons">
                    <button class="tab-btn active" data-tab="url">üì∫ YouTube URL</button>
                    <button class="tab-btn" data-tab="srt">üìÑ Upload SRT File</button>
                </div>

                <!-- YouTube URL Tab -->
                <div id="url-tab" class="tab-content active">
                    <div class="url-input-container">
                        <div class="input-group">
                            <input 
                                type="url" 
                                id="videoUrl" 
                                placeholder="Paste YouTube URL here..."
                                class="url-input"
                            >
                            <div id="urlValidation" class="url-validation"></div>
                        </div>
                        
                        <div class="platform-selection">
                            <label>Target Platform:</label>
                            <div class="platform-buttons">
                                <button class="platform-btn active" data-platform="YouTube Shorts">YouTube Shorts</button>
                                <button class="platform-btn" data-platform="TikTok">TikTok</button>
                                <button class="platform-btn" data-platform="Instagram Reels">Instagram Reels</button>
                            </div>
                        </div>

                        <button id="analyzeBtn" class="analyze-btn" disabled>
                            <i class="fas fa-play"></i>
                            Analyze Video
                        </button>
                    </div>
                </div>

                <!-- SRT Upload Tab -->
                <div id="srt-tab" class="tab-content">
                    <div class="srt-upload-container">
                        <div class="upload-section">
                            <h3>üìÑ Upload SRT File (Required)</h3>
                            <div class="file-upload-area" id="srtUploadArea">
                                <div class="upload-icon">üìÑ</div>
                                <p>Drag and drop your .srt file here or click to browse</p>
                                <input type="file" id="srtFile" accept=".srt" style="display: none;">
                                <button class="browse-btn" onclick="document.getElementById('srtFile').click()">
                                    Browse SRT File
                                </button>
                                <div id="srtFileName" class="file-name"></div>
                            </div>
                        </div>

                        <div class="upload-section">
                            <h3>üé¨ YouTube URL (Optional - for downloads)</h3>
                            <p style="color: #666; font-size: 14px; margin-bottom: 15px;">
                                Add the YouTube URL to enable direct video clip downloads. If not provided, you'll get FFmpeg commands instead.
                            </p>
                            <div class="input-group">
                                <input 
                                    type="url" 
                                    id="srtVideoUrl" 
                                    placeholder="Paste YouTube URL here (optional)..."
                                    class="url-input"
                                    style="width: 100%;"
                                >
                                <div id="srtUrlValidation" class="url-validation"></div>
                            </div>
                        </div>

                        <button id="analyzeSrtBtn" class="analyze-btn" disabled>
                            <i class="fas fa-upload"></i>
                            Analyze SRT File
                        </button>
                    </div>
                </div>
            </section>

            <!-- Progress Section -->
            <section id="progressSection" class="progress-section hidden">
                <div class="progress-container">
                    <div class="progress-header">
                        <h3>üîÑ Analyzing Content...</h3>
                    </div>
                    
                    <div class="progress-bar">
                        <div id="progressFill" class="progress-fill"></div>
                    </div>
                    
                    <div id="progressStatus" class="progress-status">Initializing analysis...</div>
                    
                    <div class="progress-steps">
                        <div class="step active">
                            <div class="step-number">1</div>
                            <div class="step-label">Extract Content</div>
                        </div>
                        <div class="step">
                            <div class="step-number">2</div>
                            <div class="step-label">AI Analysis</div>
                        </div>
                        <div class="step">
                            <div class="step-number">3</div>
                            <div class="step-label">Score Clips</div>
                        </div>
                        <div class="step">
                            <div class="step-number">4</div>
                            <div class="step-label">Generate Results</div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Results Section -->
            <section id="resultsSection" class="results-section hidden">
                <div class="results-header">
                    <h2>üé¨ Viral Clips Found</h2>
                    <div class="results-summary">
                        <div class="summary-card">
                            <div class="summary-number" id="totalClips">0</div>
                            <div class="summary-label">Total Clips</div>
                        </div>
                        <div class="summary-card">
                            <div class="summary-number" id="avgScore">0.0</div>
                            <div class="summary-label">Avg Score</div>
                        </div>
                        <div class="summary-card">
                            <div class="summary-number" id="topCategory">-</div>
                            <div class="summary-label">Top Category</div>
                        </div>
                    </div>
                </div>

                <div class="filter-controls">
                    <select id="sortBy">
                        <option value="score">Sort by Score</option>
                        <option value="duration">Sort by Duration</option>
                        <option value="category">Sort by Category</option>
                    </select>
                    
                    <select id="filterCategory">
                        <option value="all">All Categories</option>
                        <option value="Trading Knowledge">Trading Knowledge</option>
                        <option value="Trading Psychology">Trading Psychology</option>
                        <option value="Risk Management">Risk Management</option>
                        <option value="General Content">General Content</option>
                    </select>
                    
                    <div class="score-filter">
                        <label>Min Score: <span id="minScoreValue">0</span></label>
                        <input type="range" id="minScore" min="0" max="100" value="0">
                    </div>
                </div>

                <div id="highlightsGrid" class="highlights-grid"></div>
                <div id="clipsContainer" class="clips-container"></div>
            </section>

            <!-- Error Section -->
            <section id="errorSection" class="error-section hidden">
                <div class="error-container">
                    <div class="error-icon">‚ö†Ô∏è</div>
                    <h3>Analysis Failed</h3>
                    <p id="errorMessage">Something went wrong during analysis.</p>
                    <button id="retryBtn" class="retry-btn">Try Again</button>
                </div>
            </section>
        </main>
    </div>

    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>
</html>
